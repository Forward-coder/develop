import{g as F,s as M,d as N}from"./role-a9c72bb7.js";import{_ as j,B as q,r as s,o as O,c as I,b as l,w as t,e as m,f as S,a as T,i as d,t as z,E as b,D as A}from"./index-31da5b45.js";const G={class:"page"},H={__name:"RoleList",setup(J){const g=m([]),i=m(!1),p=m(null),f=m(!1),n=S({id:null,code:"",name:"",isEnabled:1}),k={code:[{required:!0,message:"请输入角色编码",trigger:"blur"}],name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]};async function _(){const o=await F();g.value=o.list||[]}function v(o){o?Object.assign(n,{id:o.id,code:o.code,name:o.name,isEnabled:o.isEnabled??1}):y(),i.value=!0}function y(){var o;Object.assign(n,{id:null,code:"",name:"",isEnabled:1}),(o=p.value)==null||o.resetFields()}async function x(){var o;await((o=p.value)==null?void 0:o.validate().catch(()=>{})),f.value=!0;try{await M(n),b.success("保存成功"),i.value=!1,_()}catch(e){b.error((e==null?void 0:e.message)||"保存失败")}finally{f.value=!1}}async function C(o){await A.confirm("确定删除该角色吗？","提示",{type:"warning"}),await N(o.id),b.success("删除成功"),_()}return q(_),(o,e)=>{const u=s("el-button"),r=s("el-table-column"),w=s("el-tag"),R=s("el-table"),L=s("el-card"),V=s("el-input"),c=s("el-form-item"),E=s("el-radio"),B=s("el-radio-group"),U=s("el-form"),$=s("el-dialog");return O(),I("div",G,[l(L,null,{header:t(()=>[e[7]||(e[7]=T("span",null,"角色管理",-1)),l(u,{type:"primary",style:{float:"right"},onClick:e[0]||(e[0]=a=>v())},{default:t(()=>[...e[6]||(e[6]=[d("新增角色",-1)])]),_:1})]),default:t(()=>[l(R,{data:g.value,border:"",stripe:""},{default:t(()=>[l(r,{prop:"code",label:"角色编码",width:"120"}),l(r,{prop:"name",label:"角色名称",width:"140"}),l(r,{prop:"isEnabled",label:"状态",width:"100"},{default:t(({row:a})=>[l(w,{type:a.isEnabled===1?"success":"info"},{default:t(()=>[d(z(a.isEnabled===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(r,{label:"操作",width:"140",fixed:"right"},{default:t(({row:a})=>[l(u,{link:"",type:"primary",onClick:D=>v(a)},{default:t(()=>[...e[8]||(e[8]=[d("编辑",-1)])]),_:1},8,["onClick"]),l(u,{link:"",type:"danger",onClick:D=>C(a)},{default:t(()=>[...e[9]||(e[9]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l($,{modelValue:i.value,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value=a),title:n.id?"编辑角色":"新增角色",width:"420px",onClose:y},{footer:t(()=>[l(u,{onClick:e[4]||(e[4]=a=>i.value=!1)},{default:t(()=>[...e[12]||(e[12]=[d("取消",-1)])]),_:1}),l(u,{type:"primary",loading:f.value,onClick:x},{default:t(()=>[...e[13]||(e[13]=[d("确定",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(U,{ref_key:"formRef",ref:p,model:n,rules:k,"label-width":"90px"},{default:t(()=>[l(c,{label:"角色编码",prop:"code"},{default:t(()=>[l(V,{modelValue:n.code,"onUpdate:modelValue":e[1]||(e[1]=a=>n.code=a),placeholder:"如 admin",disabled:!!n.id},null,8,["modelValue","disabled"])]),_:1}),l(c,{label:"角色名称",prop:"name"},{default:t(()=>[l(V,{modelValue:n.name,"onUpdate:modelValue":e[2]||(e[2]=a=>n.name=a),placeholder:"如 管理员"},null,8,["modelValue"])]),_:1}),l(c,{label:"状态",prop:"isEnabled"},{default:t(()=>[l(B,{modelValue:n.isEnabled,"onUpdate:modelValue":e[3]||(e[3]=a=>n.isEnabled=a)},{default:t(()=>[l(E,{label:1},{default:t(()=>[...e[10]||(e[10]=[d("启用",-1)])]),_:1}),l(E,{label:0},{default:t(()=>[...e[11]||(e[11]=[d("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Q=j(H,[["__scopeId","data-v-2d2eeedc"]]);export{Q as default};
